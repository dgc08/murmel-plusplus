;!MURBIN

_start: ;; if compiled with stdlib just comment that out
    mov e3 4
    call main
    hlt *r0

include std.io
include std.string

$msg1:
    #"Hello, world!"
$msg2:
    #"Hello, computer!"
$msg3:
    #"Len of msg2: \""
$msg4:
    #"Trying atoi on: \""
$test_atoi:
    #"6942"
$closing:
    #"\"\n"

main:
    ;call world
    mov r0 $msg3
    call puts
    cpy r0 $msg2
    call puts
    cpy r0 $closing
    call puts
    cpy r0 $msg2
    call strlen
    call printnum
    putmacro putchar STD.endl

    mov r0 $msg4
    call puts
    cpy r0 $test_atoi
    call puts
    cpy r0 $closing
    call puts


    cpy r0 $test_atoi
    call atoi
    call printnum
    putmacro putchar STD.endl

    movz r0
    ret
